@model ssc.Models.ManageDepreg
@{

    Layout = null;

}

<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Meta -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SSC(NR) - Dashboard</title>

    <!-- vendor css -->
    <link href="~/lib/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="~/lib/Ionicons/css/ionicons.css" rel="stylesheet">
    <link href="~/lib/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet">
    <link href="~/lib/jquery-switchbutton/jquery.switchButton.css" rel="stylesheet">
    <link href="~/lib/highlightjs/github.css" rel="stylesheet">

    <link href="~/lib/jquery.dataTables.css" rel="stylesheet">
    <link href="~/lib/select2/css/select2.min.css" rel="stylesheet">
    <!-- Bracket CSS -->
    <link rel="stylesheet" href="~/css/bracket.css">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="~/js/vendor/modernizr-2.8.3.min.js"></script>

    <style>
        .email {
            padding-right: 0px;
        }

        .email1 {
            padding-left: 0px;
        }

        .email2 {
            padding-right: 0px;
            padding-left: 5px;
            padding-top: 10px;
        }

        button:disabled {
            cursor: not-allowed;
            pointer-events: all !important;
        }
    </style>
    <link href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
          rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

    <!-- Javascript -->
  
</head>

<body>
    <form asp-action="Index" asp-controller="DeptRegistration" method="post" enctype="multipart/form-data">
        @* @using (html.beginform("index","gallery", formmethod.post, new{enctype= "multipart/formdata"}))
            {*@
        <div class="br-pagebody">
            <div class="br-section-wrapper">
                <div class="text-center pd-y-10"><img src="~/img/logo.jpg" class="img-fluid"></div>
                <h4>User Department Registration</h4>
                <div class="form-layout form-layout-1">
                    <div class="row mg-b-25">
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label class="form-control-label tx-gray-700">Ministry: <span asp-validation-for="depreg.Ministry" class="tx-danger"></span></label>
                                <select class="form-control select2" asp-for="depreg.Ministry" data-placeholder="Choose Branch">

                                    <option value=" ">----Choose Ministry----</option>
                                    @foreach (var ministry in Model.Ministries)
                                    {
                                        <option value="@ministry.ministry_id"> @ministry.ministry_name</option>
                                    }


                                </select>
                            </div>
                        </div>

                        <div class="col-lg-4">
                            <div class="form-group">
                                <label class="form-control-label tx-gray-700">Department: <span asp-validation-for="depreg.Department" class="tx-danger"></span></label>
                                <select class="form-control select2" asp-for="depreg.Department" data-placeholder="Choose Branch">

                                    <option value=" ">----Choose Department----</option>


                                </select>
                            </div>
                        </div><!-- col-4 -->
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label class="form-control-label tx-gray-700">Name of Nodal Officer: <span asp-validation-for="depreg.Name" class="tx-danger"></span></label>
                                <input type="text" asp-for="depreg.Name" class="form-control" id="name">

                            </div>
                        </div>
                    </div>
                    <div class="row mg-b-25">
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label class="form-control-label tx-gray-700">Mobile: <span asp-validation-for="depreg.Mobile_no" class="tx-danger"></span></label>
                                <input type="text" asp-for="depreg.Mobile_no" class="form-control" id="mob" maxlength="10">
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label class="form-control-label tx-gray-700">Email: <span asp-validation-for="depreg.Email" class="tx-danger"></span></label>
                                <div class="row">
                                    <div class="col-lg-7 email">
                                        <input type="text" asp-for="depreg.Email" class="form-control" id="email">
                                    </div>
                                    <div class="col-lg-1 email2">
                                        @@
                                    </div>
                                    <div class="col-lg-4 email1">

                                        <select class="form-control" asp-for="depreg.Emailtype">
                                            <option>nic.in</option>
                                            <option>gov.in</option>
                                        </select>

                                    </div>
                                </div>

                            </div>






                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">


                                <label class="form-control-label tx-gray-700">Reg For: <span class="tx-danger"></span></label>


                                <select asp-for="depreg.post" class="form-control select2" data-placeholder="Choose1 Branch">
                                    <option value="">Select</option>
                                    <option value="MTS">MTS</option>
                                    <option value="selectionpost">selectionpost</option>
                                </select>


                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">

                                <div id="input-field" style="display: none;">
                                <label class="form-control-label tx-gray-700">Year<span class="tx-danger"></span></label>

                                    <input type="text" asp-for="depreg.Year" id="input1" class="form-control" />
                                </div>

                                <div id="select2-field" style="display: none;">
                                      <label class="form-control-label tx-gray-700">Phases<span class="tx-danger"></span></label>

                                    <select id="select2" class="form-control select2" asp-for="depreg.phases" data-placeholder="Choose Branch">
                                        <option value=" ">Select an option</option>
                                        @foreach (var item in Model.phases_post)
                                        {
                                            <option value="@item.phase_name"> @item.phase_name</option>
                                        }
                                    </select>
                                </div>

                            </div>
                        </div>

                    </div>
                    <div class="row-mg-b-25">
                        <div class="form-group">
                            <div class="col-lg-12">
                                <div class="form-group">
                                    <label class="form-control-label tx-gray-700" for="customFile">
                                        Nodal Officer Authorization Letter:-<span asp-validation-for="depreg.Upload_doc" class="tx-danger"></span>
                                    </label>
                                    @*<label class="custom-file">
                                        <input  type="file" asp-for="depreg.Upload_doc" id="inputGroupFile02" class="custom-file-input">*@

                                    @* <input type="file" asp-for="depreg.Upload_doc" class="form-control" id="customFile" />

                                        <span class="custom-file-control custom-file-control-primary">

                                        </span>*@
                                    <div class="form-group">
                                        <input type="file" asp-for="depreg.Upload_doc" onChange="validatePDF(this)" accept=".pdf" />
                                    </div>
                                    <div class="form-group">
                                        @*<button type="submit">Upload</button>*@
                                    </div>
                                    @*</label>*@
                                    <p class="text-left"><strong>(Brows PDF format invoce )</strong></p>
                                </div>
                            </div>
                        </div>





                        <div class="form-layout-footer">
                            @*                               <a href="/US1approval/approval"><button class="btn btn-red">Approved</button></a>
                            *@
                            <button class="btn btn-red">Submit</button>
                            <button class="btn btn-secondary">Cancel</button>
                        </div><!-- form-layout-footer -->





                    </div><!-- br-section-wrapper -->
                </div>
                <script type="text/javascript">
                    function ShowMessage(message) {
                        alert(message);
                    }
                </script>
                <script src="~/lib/jquery/jquery.js"></script>
                <script src="~/lib/popper.js/popper.js"></script>
                <script src="~/lib/bootstrap.js"></script>
                <script src="~/lib/perfect-scrollbar/js/perfect-scrollbar.jquery.js"></script>

    </form>

    <script>


                function DocUpload(){
                    const allowedTypes = 'pdf';

                    const fileInput = document.querySelector('input[type="file"]');
                    const filePath = fileInput.value;

                    const fileExtension = filePath.split('.').pop().toLowerCase();

                    if (!allowedTypes.includes(fileExtension)) {
                        alert('Invalid file format. Only PDF are allowed.');
                        fileInput.value = ''; // reset the file input to clear the selected file
                    }


                }
                function validatePDF(input) {
          // Get the uploaded file object
          var file = input.files[0];

          // Check if the file is a PDF and has a valid type
          //if (file.type == "application/pdf") {
          //  // Do something to validate the PDF, such as checking its metadata
          //  alert("PDF is valid!");
          //}
          if(file.type!="application/pdf") {
            // Show an error message if the file is not a valid PDF
            alert("Please select a valid PDF file!");
            // Clear the input field to prevent further submission
            input.value = null;
          }
        }

                $(document).ready(function () {
                    //alert();


             $("#depreg_Ministry").change(function() {
                //alert( $('option:selected', this).val() );
                 var ministry = $('option:selected', this).val();

                 $.ajax({
                        type: "GET",
                        url: "http://localhost:5027/DeptRegistration/getdepartment?id=" + ministry,
                        //data: JSON.stringify(State),
                        dataType: "JSON",
                        contentType: "application/json; charset=utf-8",

                        success: function (data) {
                           // alert();
                            $("#depreg_Department").empty();
                            $("#depreg_Department").append('<option value="">----Choose Department----</option>');
                            $.each(data, function(k, v) {
                                    var sf=v;

                                    $("#depreg_Department").append('<option value='+v.dep_id+'>'+v.dep_name+'</option>');


                                  });
                        },
                        error: function (err) {

                            alert("Some Thing Went Wrong");
                        }
                    });
                });
            });



        
        $("#depreg_post").change(function() {

                 var applied = $('option:selected', this).val();

                 $("#input-field").css("display", "none");
                  $("#select2-field").css("display", "none");
                   $("#input1").val(" ");
                     $("#select2").val(" ");
                   
                 
                 if (applied === "MTS") {
             $("#input-field").css("display", "block");
          }
          else if (applied === "selectionpost") {
             $("#select2-field").css("display", "block");
          }
        })


    </script>
</body>

</html>
