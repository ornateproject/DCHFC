@model managecandidatedata;
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor Accessor
@{
    Layout = "~/Views/Shared/_LayoutCandidate.cshtml";
  
}
@{
    var regno = @Accessor.HttpContext.Session.GetString("Reg_no").ToString();
}


<div class="br-pageheader pd-y-15 pd-l-20">
    <nav class="breadcrumb pd-0 mg-0 tx-12">
        <a class="breadcrumb-item" href="US1.html">Candidate</a>
        <span class="breadcrumb-item active">Apply Post</span>
    </nav>
</div><!-- br-pageheader -->
<div class="pd-x-20 pd-sm-x-30 pd-t-20 pd-sm-t-30 text-center">
    <h4 class="tx-gray-800 mg-b-5">Apply Post</h4>

</div>
<form asp-action="candidate" asp-controller="Candidatedata" enctype="multipart/form-data" method="post" asp-antiforgery="false" >
 
    <div class="br-pagebody">
    <div class="br-section-wrapper">
 <div style="display:flex;justify-content:space-between;margin-bottom:15px">
    @*<span>
     <label  style="color:black"class="form-label" for="customFile"><b>Upload Aadhar Card</b></label>
                    <input type="file" id="fileInput1" onchange="checkFileUpload()" asp-for="@Model.candetails.adhar_card" accept=".pdf" class="form-control" id="customFile" />

    </span>*@
                <span>
                    <label style="color:black" class="form-label" for="customFile"><b>Upload 10th Certificate</b></label>
                    <input type="file" id="fileInput1" onchange="checkFileUpload()" asp-for="@Model.candetails.marksheet" accept=".pdf" class="form-control" id="customFile" />
                </span>
</div>
        <!-- d-flex -->
        <div class="table-wrapper rounded table-responsive">
            
            <table id="datatable1" class="table display responsive nowrap">
                <thead>
                    <tr>
                        <th>Sr No.</th>
                        <th>Post ID</th>
                        <th>Post Name</th>
                        <th>Department</th>                        
                        <th>Check box</th>
                        <th>Document</th>
                          <th>Preview</th>
                            <th>Status</th>
                        <th>Upload</th>
                        
                    </tr>
                </thead>
                <tbody >
                        @{

                        for(var i=0;i< Model.getposts.Count;i++ )
                        {
 
                            <tr>
                                <th scope="row">@i</th>                                
                                <td><label>@Model.getposts[i].post_id</label> <input type="hidden" asp-for="@Model.getposts[i].post_id" class="form-control"> </td>
                                <td><label>@Model.getposts[i].post_name</label> <input type="hidden" asp-for="@Model.getposts[i].post_name" class="form-control"/> </td>
                                <td><label>@Model.getposts[i].dep_name</label> <input type="hidden" asp-for="@Model.getposts[i].dep_name" class="form-control"/> </td>
                                   
                                    @if (@Model.getposts[i].isfinal_submit ==1)
                                    {
                                        <td>
                                        <input type="checkbox" checked="checked" disabled id="checkbox_@i" asp-for="@Model.getposts[i].is_checked" />
                                        </td>
                                    }
                                    else
                                    {
                                        <td>
                                            <input type="checkbox"  id="checkbox_@i" asp-for="@Model.getposts[i].is_checked" />
                                        </td>
                                    }
                                    
                                    @if (@Model.getposts[i].uploaded_status == 1)
                                    {
                                        @if (@Model.getposts[i].status == "2")
                                        {
                                            <td>
                                                <a asp-controller="Candidatedata" asp-action="candidateupload_doc" asp-route-post_id="@Model.getposts[i].post_id" asp-for="@Model.getposts[i].Upload_doc" id="fileUpload_@i">Upload Document</a>
                                            </td>
                                        }
                                        else
                                        {
                                            <td>
                                                <a style="color: gray; cursor: not-allowed; pointer-events: none; text-decoration: none;" asp-controller="Candidatedata" asp-action="candidateupload_doc" asp-route-post_id="@Model.getposts[i].post_id" asp-for="@Model.getposts[i].Upload_doc" id="fileUpload_@i">Upload Document</a>
                                            </td>
                                        }
                                       
                                    }
                                    else
                                    {
                                        <td>
                                            <a asp-controller="Candidatedata" asp-action="candidateupload_doc" asp-route-post_id="@Model.getposts[i].post_id" asp-for="@Model.getposts[i].Upload_doc" id="fileUpload_@i" >Upload Document</a>
                                        </td>
                                    }

                                    @if (@Model.getposts[i].isfinal_submit == 0)
                                    {
                                        
                                            <td>
                                                <!--<a href="~/allpdf/finaldocument/@Model.getposts[i].post_id" style="cursor:pointer">Preview</a>-->
                                                <a asp-for="@Model.getposts[i].Upload_doc" href="~/allpdf/finaldocument/@(Model.getposts[i].post_id)_@(regno).pdf">Preview</a>

                                        </td>

                                    }
                                    else if (@Model.getposts[i].status == "2")
                                    {
                                        <td>
                                            <!--<a href="~/allpdf/finaldocument/@Model.getposts[i].post_id" style="cursor:pointer">Preview</a>-->
                                            <a asp-for="@Model.getposts[i].Upload_doc" href="~/allpdf/finaldocument/@(Model.getposts[i].post_id)_@(regno).pdf">Preview</a>

                                        </td>
                                    }
                                    else
                                    {
                                        <td>
                                            <a style="color: gray; cursor: not-allowed; pointer-events: none; text-decoration: none;" asp-controller="Candidatedata" asp-action="candidateupload_doc" asp-route-post_id="@Model.getposts[i].post_id" asp-for="@Model.getposts[i].Upload_doc" id="fileUpload_@i">Preview</a>

                                        </td>
                                    }
                                    <td>
                                        @if (@Model.getposts[i].status == "1")
                                        {
                                            <span class="text" style="color:green">Approved </span>
                                        }
                                        else if (@Model.getposts[i].status == "2")
                                        {
                                            <span class="text" style="color:blue">Rejected </span>
                                        }
                                        else if (@Model.getposts[i].status == "3")
                                        {
                                            <span class="text" style="color:rebeccapurple">Final Reject </span>
                                        }
                                        else
                                        {
                                            <span class="text-danger">Pending </span>
                                        }

                                    </td>

                                    @if (@Model.getposts[i].isfinal_submit == 1 )
                                    {
                                        @if (@Model.getposts[i].status == "2")
                                        {
                                            <td><button type="submit" asp-action="" asp-controller="Candidatedata" id="popup-btn" class="btn btn-red" data-toggle="modal" data-target="#exampleModalCenter">
                                                    Apply
                                                </button>

                                            </td>
                                        }
                                        else
                                        {
                                            <td>
                                                <button type="submit" disabled id="popup-btn" class="btn btn-red" data-toggle="modal" data-target="#exampleModalCenter">
                                                    Apply
                                                </button>

                                            </td>
                                        }
                                       
                                    }
                                   
                                    else
                                    {
                                        <td>
                                            <button type="submit" id="popup-btn" class="btn btn-red" data-toggle="modal" data-target="#exampleModalCenter">
                                                Apply
                                            </button>

                                        </td>
                                    }
                                </tr>


                            }
                        }

                    </tbody>

                </table>
               @* <div class="col-md-12 text-center">
                    <button type="submit" id="popup-btn" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
                        Next
                    </button>
                </div>
                *@

            </div><!-- bd -->

        </div><!-- br-section-wrapper -->   
    </div>
    <!-- Button trigger modal -->
    <!-- Modal -->

     
</form>

<!-- ########## END: MAIN PANEL ########## -->


<script src="~/lib/jquery/jquery.js"></script>
<script src="~/lib/popper.js/popper.js"></script>
<script src="~/lib/bootstrap.js"></script>
<script src="~/lib/perfect-scrollbar/js/perfect-scrollbar.jquery.js"></script>
<script src="~/lib/moment/moment.js"></script>
<script src="~/lib/jquery-ui/jquery-ui.js"></script>
<script src="~/lib/jquery-switchbutton/jquery.switchButton.js"></script>
<script src="~/lib/peity/jquery.peity.js"></script>
<script src="~/lib/highlightjs/highlight.pack.js"></script>
<script src="~/lib/jquery.dataTables.js"></script>
<script src="~/lib/dataTables.responsive.js"></script>
<script src="~/lib/select2/js/select2.min.js"></script>

<script src="~/js/bracket.js"></script>
<script>
    $(function(){
      'use strict';

      $('#datatable1').DataTable({
        responsive: true,
        "bDestroy": true
        language: {
          searchPlaceholder: 'Search...',
          sSearch: '',
          lengthMenu: '_MENU_ items/page',
        }
      });

      $('#datatable2').DataTable({
        bLengthChange: false,
        searching: false,
        responsive: true
      });

      // Select2
      $('.dataTables_length select').select2({ minimumResultsForSearch: Infinity });

    });      
       
</script>


<script>

</script>


<script>

    $(function(){
      'use strict'

      // FOR DEMO ONLY
      // menu collapsed by default during first page load or refresh with screen
      // having a size between 992px and 1299px. This is intended on this page only
      // for better viewing of widgets demo.
      $(window).resize(function(){
        minimizeMenu();
      });

      minimizeMenu();

      function minimizeMenu() {
        if(window.matchMedia('(min-width: 992px)').matches && window.matchMedia('(max-width: 1299px)').matches) {
          // show only the icons and hide left menu label by default
          $('.menu-item-label,.menu-item-arrow').addClass('op-lg-0-force d-lg-none');
          $('body').addClass('collapsed-menu');
          $('.show-sub + .br-menu-sub').slideUp();
        } else if(window.matchMedia('(min-width: 1300px)').matches && !$('body').hasClass('collapsed-menu')) {
          $('.menu-item-label,.menu-item-arrow').removeClass('op-lg-0-force d-lg-none');
          $('body').removeClass('collapsed-menu');
          $('.show-sub + .br-menu-sub').slideDown();
        }
      }
    });
    function toggleUpload() {
  const checkbox = document.getElementById("upload-checkbox");
  const fileInput = document.getElementById("file-input");

  if (checkbox.checked) {
    fileInput.removeAttribute("disabled");
  } else {
    fileInput.setAttribute("disabled", true);
  }
}

const fileInput = document.getElementById("file-input");
fileInput.addEventListener("change", function() {
  const checkbox = document.getElementById("upload-checkbox");
  checkbox.setAttribute("disabled", true);
});
 function validatePDF(input) {

          var file = input.files[0];

         
          if(file.type!="application/pdf") {
               alert("Please select a valid PDF file!");

            input.value = null;
          }
        }

</script>
<script>
    function checkFileUpload() {
        const fileInput = document.getElementById('file-input');
        const loopingCheckbox = document.getElementById('upload-checkbox');

        if (fileInput.value) {
            loopingCheckbox.disabled = false;
        } else {
            loopingCheckbox.disabled = true;
        }
    }
</script>

<script>
		$(document).ready(function() {
			$("input[type='checkbox']").click(function() {
				var checkboxId = $(this).attr("id");
				var fileUploadId = checkboxId.replace("checkbox_", "fileUpload_");

				if ($(this).is(":checked")) {
					$("#" + fileUploadId).prop("disabled", false);
				} else {
					$("#" + fileUploadId).prop("disabled", true);
				}
			});
		});
        
	</script>
   
 